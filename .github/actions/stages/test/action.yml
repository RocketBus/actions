name: 'Test'
description: 'Test'

inputs:
  yarnrc:
    description: ''
    required: false
  npmrc:
    description: ''
    required: false
  maven_settings:
    description: ''
    required: false

runs:
  using: "composite"
  steps:
    - name: Set up Buildpack
      id: buildpack
      uses: ./.github/actions/utils/buildpack

    - name: Test Node.js
      if: ${{ contains(fromJSON(steps.buildpack.outputs.buildpacks), 'nodejs') }}
      uses: ./.github/actions/nodejs
      with:
        stage: 'test'
        yarnrc: ${{ inputs.yarnrc }}
        npmrc: ${{ inputs.npmrc }}

    - name: Test Java
      if: ${{ contains(fromJSON(steps.buildpack.outputs.buildpacks), 'java') }}
      uses: ./.github/actions/java
      with:
        stage: 'test'
        maven_settings: ${{ inputs.maven_settings }}

    - name: Test Gradle
      if: ${{ contains(fromJSON(steps.buildpack.outputs.buildpacks), 'gradle') }}
      uses: ./.github/actions/gradle
      with:
        stage: 'test'