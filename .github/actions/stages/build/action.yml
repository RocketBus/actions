name: 'Build'
description: 'Build Artifact'

runs:
  using: "composite"
  steps:
    - name: Set up Buildpack
      id: buildpack
      uses: RocketBus/actions/.github/actions/utils/buildpack@v1

    - name: Build Node.js
      if: ${{ contains(fromJSON(steps.buildpack.outputs.buildpacks), 'nodejs') }}
      uses: RocketBus/actions/.github/actions/nodejs@v1
      with:
        stage: 'build'

    - name: Build Java
      if: ${{ contains(fromJSON(steps.buildpack.outputs.buildpacks), 'java') }}
      uses: RocketBus/actions/.github/actions/java@v1
      with:
        stage: 'build'

    - name: Build Gradle
      if: ${{ contains(fromJSON(steps.buildpack.outputs.buildpacks), 'gradle') }}
      uses: RocketBus/actions/.github/actions/gradle@v1
      with:
        stage: 'build'

    - name: Build Docker
      if: ${{ contains(fromJSON(steps.buildpack.outputs.buildpacks), 'docker') }}
      uses: RocketBus/actions/.github/actions/docker@v1
      with:
        stage: 'build'

    - name: Build Helm
      if: ${{ contains(fromJSON(steps.buildpack.outputs.buildpacks), 'helm') }}
      uses: RocketBus/actions/.github/actions/helm@v1
      with:
        stage: 'build'